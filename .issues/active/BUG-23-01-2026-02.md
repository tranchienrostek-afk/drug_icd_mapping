Lỗi rồi:

curl -X 'POST'
  'http://10.14.190.28:8000/api/v1/consult_integrated'
  -H 'accept: application/json'
  -H 'Content-Type: application/json'
  -d '{
  "diagnoses": [
    {
      "code": "J00",
      "name": "Viêm mũi họng cấp [cảm thường]",
      "type": "MAIN"
    }
  ],
  "items": [
    {
      "id": "916b023e-a5cb-4e8e-b0d4-309f2d02d778",
      "name": "natriclorid srk saltmax 0 45g 50ml x 100ml"
    }
  ],
  "request_id": "BT/24594",
  "symptom": "Viêm đường hô hấp - Viêm mũi họng cấp - Nhiễm RSV"
}'

output:

{
  "results": [
    {
      "id": "916b023e-a5cb-4e8e-b0d4-309f2d02d778",
      "name": "natriclorid srk saltmax 0 45g 50ml x 100ml",
      "category": "drug",
      "validity": "valid",
      "role": "medical equipment",
      "explanation": "Expert Verified: Classified as 'medical equipment' bởi TĐV. (Match: exact)",
      "source": "INTERNAL_KB_TDV"
    }
  ]
}



Với việc 

"role": "medical equipment",

thì category không thể là drug

`role: medical equipment`

=> category phải map thành nodrug

validity thì để trống

Mọi thứ đều có hết ở file tham khảo:

Tham khảo:

C:\Users\Admin\Desktop\drug_icd_mapping\knowledge for agent\logs_to_database\group_definitions.md

Chứ chán quá

Xem code ở đâu và trình bày lại logic map đó vào file theo dõi

giải pháp là nâng cao code và chỉ ra cả logic này cho AI nữa, đưa vào prompt để AI nắm được. Chứ không thể nào có đầu ra tệ hại như thế.

AI sẽ nhận được kết quả của AI và thẩm định viên

Sau đó cho quyền đánh giá xem kết quả cuối cùng sẽ như nào căn cứ bằng dữ liệu được đưa vào

Trường hợp nào mà có kết quả của Ai mà thẩm định viên không feedback, thì ngầm hiểu rằng kết quả cua AI là chính xác

Có nhiều thẩm định viên, có thểm định viên feedback sai hoặc thiếu, logic AI được phép suy luận các trường hợp này để có kết quả tốt nhất

Tôi lại mất công nhắc lại bạn về việc mapping:

Sản phẩm nào cũng có category là drug hoặc nodrug

Nếu là drug thì xem nó có dùng để điều trị không

Nếu có thì là valid

Nếu không có thì là invalid

Khi có xuất hiện từ invalid thì chắc chắn đầu ra sẽ là

category: drug

validity: invalid.

Chỉ thế, thôi, lúc này không có role

Nếu có điều trị thì sẽ phát sinh thêm 2 trường hợp con

`main drug` và `secondary drug`

Do đó nếu 1 sản phẩm đã có từ main drug thì đầu ra chắc chắn là

category: drug

validity: valid

role: main drug


Nếu  1 sản phẩm đã là `secondary drug`

thì chắc chắn đầu ra sẽ là 

category: drug

validity: valid

role: `secondary drug`


Không thể nào có trường hợp role là `secondary drug`

mà đầu ra là

category: nodrug

validity: valid

role: `secondary drug`

Tương tự với những thứ không phải là thuốc

Thì sẽ có các đầu ra như

category:  `nodrug` 

`role: supplement`

không thể nào có trường hợp trên đời alf

category:  `drug`

`role: supplement`

Tương tự với

`nodrug` + `cosmeceuticals`: **Dược mĩ phẩm**

`nodrug` + `medical equipment: Thiết bị y tế`
